
<!DOCTYPE html>
<html><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Monitor: Consumer Headlines</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

    <style>
        body {
            font-family: "Open Sans", sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            background-color: #fffefc; /* Subtle off-white background */
        }
        h1 {
            margin-bottom: 28px;
            padding-top: 30px;
            font-size: 31px;
            font-weight: bold;
            line-height: 1.2;
            color: #2c3e50;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: opacity 0.3s ease-in-out;
            border-bottom: 2px solid #3498db;
            padding-bottom: 15px;
        }
        h1:hover {
            opacity: 0.8;
        }
        #feed-list {
            list-style-type: none;
            padding: 0;
        }
        .feed-item {
            border-bottom: 1px solid #ccc;
            padding: 10px 0;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        .feed-item:hover {
            background-color: #f0f8ff; /* Light blue background on hover */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Subtle shadow on hover */
            transform: translateY(-2px); /* Slight lift effect */
        }
        .feed-item strong {
            transition: color 0.3s ease;
        }
        .feed-item:hover strong {
            color: #0066cc; /* Change title color on hover */
        }
        .feed-item a {
            text-decoration: none;
            color: #0066cc;
            transition: color 0.3s ease;
        }
        .feed-item:hover a {
            color: #004499; /* Darker blue for links on hover */
        }
        .feed-item button {
            margin-left: 10px;
        }
        .hidden {
            display: none;
        }
        #feed-summary, #excluded-terms {
            margin-top: 20px;
        }
        #error-message {
            color: rgb(174, 8, 8);
        }
        .section {
            margin-top: 30px;
            border-top: 1px solid #ccc;
            padding-top: 20px;
            background-image: linear-gradient(to bottom, #fff, #f7f7f7);
        }
        .subsection {
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 15px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        button {
            background-color: #f7f7f7;
            color: #333;
            padding: 5px 10px;
            border: 1px solid #ccc;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-right: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        button:hover {
            background-color: #e5e5e5;
        }
        h3 {
            margin-bottom: 10px;
        }
        
        #generate-feed-btn {
            background-color: #e6f3ff;
        }
        
        /* Styles for the hamburger menu */
        .hamburger-menu {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1000;
            transition: left 0.3s ease-in-out;
        }
        .hamburger-menu.active {
         left: 0;
        }
        .menu-items {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 250px;
            height: 100%;
            background-color: #f5faff;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .menu-items.active {
            display: block;
        }
        
        #menu-items-list ul {
            list-style: none;
            padding: 0;
        }
        
        #menu-items-list li {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        #menu-items-list li span {
            margin-right: 10px;
            word-break: break-all;
        }
        
        #menu-items-list button {
            margin-left: 10px;
        }
        
        /* Add this new rule */
        #feed-builder > div {
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        /* General menu styles */
        .menu {
            list-style-type: none;
            padding: 0;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        
        .menu-item {
            padding: 10px 15px;
            margin: 5px 0;
            background-color: #f0f0f0;
            border-radius: 5px;
            text-align: center;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .menu-item:hover {
            background-color: #e0e0e0;
        }
        
        .menu-item a {
            text-decoration: none;
            color: #333;
        }
        
        /* Special style for the Home item */
        .menu-item.home {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }
        
        .menu-item.home a {
            color: white;
        }
        
        #saved-configs ul {
            list-style-type: none;
            padding: 0;
        }
        
        #saved-configs li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 5px;
            background-color: #f0f0f0;
            border-radius: 5px;
        }
        
        #saved-configs li button {
            margin-left: 10px;
        }
        
        /* Updated styles for feed-specific terms */
        #feed-specific-terms-container {
            margin-top: 20px;
        }
        
        #feed-specific-terms-container button {
            margin-top: 10px;
        }
        
        .feed-specific-terms-item {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 15px;
            background-color: #f9f9f9;
        }
        
        #feed-specific-terms h4 {
            font-size: 0.85em;
            margin-top: 0;
            margin-bottom: 5px;
            font-weight: normal;
            color: #666;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        
        #feed-specific-terms h5 {
            font-size: 0.9em;
            margin-bottom: 5px;
        }
        
        #feed-specific-terms ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        #feed-specific-terms li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        #feed-specific-terms li span {
            font-size: 0.85em;
            margin-right: 15px;
            word-break: break-all;
            flex-grow: 1;
        }
        
        #feed-specific-terms button {
            flex-shrink: 0;
        }
        
        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.2); /* Lighter semi-transparent black */
            z-index: 999;
        }
    </style>
   
<style>
        body {
            font-family: "Open Sans", sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            background-color: #fffefc; /* Subtle off-white background */
        }
        .hamburger-menu {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1000;
        }
        .hamburger-menu > button {
            background-color: #f5faff;
            color: #0066cc;
            border: 1px solid #0066cc;
            font-size: 24px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
        }
        .menu-items {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 250px;
            height: 100%;
            background-color: #f5faff;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        .menu-items.active {
            display: block;
        }
        .close-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #0066cc;
        }
        #menu-items-list {
            list-style-type: none;
            padding: 0;
            margin-top: 40px;
        }
        #menu-items-list li {
            margin-bottom: 20px;
        }
        #menu-items-list a {
            text-decoration: none;
            color: #333;
            font-size: 14px;
        }
        #menu-items-list a:hover {
            color: #0066cc;
            background-color: #e6f2ff;
        }
        #menu-items-list li:first-child a {
            font-weight: bold;
            font-size: 18px; /*
        }
        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.2); // Lighter semi-transparent black
            z-index: 999;
        }
        .feed-item {
            border-bottom: 1px solid #ccc;
            padding: 10px 0;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        .feed-item:hover {
            background-color: #f0f8ff; /* Light blue background on hover */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Subtle shadow on hover */
            transform: translateY(-2px); /* Slight lift effect */
        }
        .feed-item strong {
            transition: color 0.3s ease;
        }
        .feed-item:hover strong {
            color: #0066cc; /* Change title color on hover */
        }
        .feed-item a {
            text-decoration: none;
            color: #0066cc;
            transition: color 0.3s ease;
        }
        .feed-item:hover a {
            color: #004499; /* Darker blue for links on hover */
        }
    </style></head><body>
        <div class="hamburger-menu">
            <button onclick="toggleMenu()">☰</button>
            <div id="menu-items" class="menu-items">
                <button onclick="toggleMenu()" class="close-button">X</button>
                <ul id="menu-items-list"></ul>
            </div>
        </div>
        <h1>Smart Monitor: Consumer Headlines</h1>
        <div id="error-message"></div>
        <ul id="feed-list"></ul>
        <div id="overlay"></div>
    <script>
        // Configuration
        const feeds = [{"url":"https://www.retailnews.asia/feed","unfiltered":true,"requiredTerms":[],"excludedTerms":[]},{"url":"https://insideretail.asia/feed/","unfiltered":true,"requiredTerms":[],"excludedTerms":[]},{"url":"https://daxueconsulting.com/feed/","unfiltered":true,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Shein&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Baozun&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Tmall&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Shopee&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Lazada&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Miniso&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Hong%20Kong%20retail&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=China%20coffee&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=China%20Feihe&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=China%20beer&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=China%20bakery&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=China%20retail&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=China%20fmcg&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=China%20supermarkets&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=China%20luxury&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=China%20e-commerce&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=China%20moutai&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=mengniu&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=haidilao&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=charoen%20pokhpand&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=lotte%20group&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=suntory&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=DFI&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Temu&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Li%20Ning&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Anta&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Walmart&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":["China"],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Starbucks&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":["China"],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Nestle&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":["China"],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Yum%20China&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":[],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Danone&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":["China"],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=L'Oreal&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":["China"],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=Carrefour&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":["China"],"excludedTerms":[]},{"url":"https://news.google.com/rss/search?q=McDonald's&hl=en-US&gl=US&ceid=US:en","unfiltered":false,"requiredTerms":["China"],"excludedTerms":[]}];
        const excludedTerms = new Set([]);
        const requiredTerms = new Set([]);
        let feedItems = [];
        let hiddenItems = new Set([]);
        const menuItems = [];

        function toggleMenu() {
            const menu = document.getElementById('menu-items');
            const overlay = document.getElementById('overlay');
            menu.classList.toggle('active');
            if (menu.classList.contains('active')) {
                overlay.style.display = 'block';
            } else {
                overlay.style.display = 'none';
            }
        }

        function closeMenuOnOutsideClick(event) {
            const menu = document.getElementById('menu-items');
            const hamburger = document.querySelector('.hamburger-menu > button');
            const overlay = document.getElementById('overlay');
            if (!menu.contains(event.target) && !hamburger.contains(event.target) && menu.classList.contains('active')) {
                toggleMenu();
            }
        }

        function updateMenuItemsList() {
            const menuList = document.getElementById('menu-items-list');
            menuList.innerHTML = '<li><a href="index.html">Home</a></li>';
            menuItems.forEach((item) => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="${item.url}" target="_blank">${item.name}</a>`;
                menuList.appendChild(li);
            });
        }

        function decodeHTMLEntities(text) {
            const textArea = document.createElement('textarea');
            textArea.innerHTML = text;
            return textArea.value;
        }

        function fetchFeeds() {
    document.getElementById('feed-list').innerHTML = ''; // Clear existing feed items
    feedItems = [];
    //const errorMessage = document.getElementById('error-message');
    //errorMessage.textContent = '';

    if (feeds.length === 0) {
        console.log('No feeds to fetch');
        return;
    }

    console.log('Fetching feeds:', feeds);

    const cacheBuster = new Date().getTime();
    // Removed apiKey variable and its usage
    const promises = feeds.map(feed => {
        const feedUrl = typeof feed === 'string' ? feed : feed.url;
        return $.ajax({
            url: `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedUrl)}&_=${cacheBuster}`,
            dataType: 'json'
        })
        .then(data => ({ status: 'fulfilled', value: data, feed }))
        .catch(error => ({ status: 'rejected', reason: error, feed }));
    });

    Promise.all(promises)
        .then(results => {
            console.log('Fetched results:', results);
            const errors = [];
            results.forEach(result => {
                if (result.status === 'fulfilled' && result.value.status === 'ok' && Array.isArray(result.value.items)) {
                    const items = result.value.items.map(item => {
                        // Decode the URL if it's a Bing News URL
                        if (item.link.includes('bing.com/news/apiclick.aspx')) {
                            const urlParams = new URLSearchParams(item.link);
                            item.link = decodeURIComponent(urlParams.get('url'));
                        }
                        return {
                            ...item,
                            feedTitle: result.value.feed.title,
                            feedUrl: typeof result.feed === 'string' ? result.feed : result.feed.url
                        };
                    });
                    feedItems = feedItems.concat(items);
                } else {
                    console.error('Error fetching feed:', result.feed, result.reason || result.value);
                    errors.push(typeof result.feed === 'string' ? result.feed : result.feed.url);
                }
            });
            if (errors.length > 0) {
                //const errorMessageSummary = "Errors occurred while fetching some feeds.";
                //const errorMessagesDetailed = `<p>Failed to fetch:</p><ul style="list-style-type: disc;">${errors.map((message) => `<li>${message}</li>`).join("")}</ul>`;
                errorMessage.textContent = errorMessageSummary;
                const feedList = document.getElementById('feed-list');
                const errorDiv = document.createElement('div');
                errorDiv.innerHTML = errorMessagesDetailed;
                feedList.appendChild(errorDiv);
            }
            processFeeds();
        })
        .catch(error => {
            console.error('Unexpected error:', error);
            errorMessage.textContent = 'An unexpected error occurred. Please check the console for more details.';
        });
}
        function processFeeds() {
    console.log('Processing feeds. Total items:', feedItems.length);

    const uniqueTitles = new Set();

    feedItems = feedItems.filter((item) => {
        const title = item.title.split(' - ')[0].trim();
        if (uniqueTitles.has(title)) return false;
        uniqueTitles.add(title);

        const feed = feeds.find(f => f.url === item.feedUrl);
        if (!feed) return false;

        if (feed.unfiltered) {
            return true; // Skip filtering for unfiltered feeds
        }

        // Decode HTML entities in the title
        const decodedTitle = decodeHTMLEntities(item.title.toLowerCase());
        
        // Extract domain from item.link
        let domain = '';
        try {
            const url = new URL(item.link);
            domain = url.hostname.replace('www.', '');
        } catch (e) {
            console.error('Error extracting domain:', e);
        }

        const combinedText = `${decodedTitle} ${domain}`;

        // Log for debugging
        console.log('Combined text for filtering:', combinedText);

        // Function to check if a term matches, including domain-like formats
        const termMatches = (term, text) => {
            const escapedTerm = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            const regex = new RegExp(`\\b${escapedTerm}\\b|${escapedTerm}(?=\\.)`, 'i');
            return regex.test(text);
        };

        // If the feed has specific terms, use only those
        if (feed.requiredTerms && feed.requiredTerms.length > 0 || feed.excludedTerms && feed.excludedTerms.length > 0) {
            const hasFeedRequiredTerm = !feed.requiredTerms || feed.requiredTerms.length === 0 || feed.requiredTerms.some(term => 
                termMatches(term, combinedText)
            );

            const hasFeedExcludedTerm = feed.excludedTerms && feed.excludedTerms.some(term => 
                termMatches(term, combinedText)
            );

            return hasFeedRequiredTerm && !hasFeedExcludedTerm;
        } else {
            // If no feed-specific terms, use global terms
            const hasGlobalRequiredTerm = requiredTerms.size === 0 || Array.from(requiredTerms).some(term => 
                termMatches(term, combinedText)
            );

            const hasGlobalExcludedTerm = Array.from(excludedTerms).some(term => 
                termMatches(term, combinedText)
            );

            return hasGlobalRequiredTerm && !hasGlobalExcludedTerm;
        }
    });

    // Sort by date
    feedItems.sort((a, b) => moment(b.pubDate).diff(moment(a.pubDate)));

    console.log('After processing. Total items:', feedItems.length);

    displayFeeds();
}
        function displayFeeds() {
            const feedList = document.getElementById('feed-list');
            feedList.innerHTML = '';

            if (feedItems.length === 0) {
                feedList.innerHTML = '<p>No items to display.</p>';
                return;
            }

            feedItems.forEach(item => {
                const li = document.createElement('li');
                li.className = 'feed-item';
                if (hiddenItems.has(item.link)) {
                    li.classList.add('hidden');
                }

                // Extract title and source
                let title = item.title;
                let source;

                // Check if the title already contains a source (typical for Google News)
                if (item.title.includes(' - ')) {
                    // Keep the title as is, it already has the source
                    source = '';
                } else {
                    // Extract domain name from the link
                    try {
                        const url = new URL(item.link);
                        source = url.hostname.replace('www.', '');
                    } catch (e) {
                        source = 'Unknown Source';
                    }
                    // Append the source to the title
                    title += ` - ${source}`;
                }

                li.innerHTML = `
                    <strong>${title}</strong><br>
                    <small>${moment(item.pubDate).format('MMMM D, YYYY, h:mm a')}</small><br>
                    <a href="${item.link}" target="_blank">Read More</a>
                `;
                feedList.appendChild(li);
            });

            console.log('Displayed feed items:', feedItems.length);
        }
        function setupAutoRefresh() {
        const REFRESH_INTERVAL = 60 * 60 * 1000; // 10 minutes in milliseconds

        function autoRefresh() {
            console.log('Auto-refreshing feeds...');
            if (feeds.length > 0) {
                fetchFeeds();
            }
        }

        // Set up interval for auto-refresh
        setInterval(autoRefresh, REFRESH_INTERVAL);

        // Also refresh when the window gains focus
        window.addEventListener('focus', autoRefresh);
    }
        function toggleItemVisibility(button, itemLink) {
                const listItem = button.closest('.feed-item');
                if (hiddenItems.has(itemLink)) {
                    hiddenItems.delete(itemLink);
                    listItem.classList.remove('hidden');
                    button.textContent = 'Hide';
                } else {
                    hiddenItems.add(itemLink);
                    listItem.classList.add('hidden');
                    button.textContent = 'Unhide';
                }
                saveHiddenItemsToStorage();
            }
        function saveHiddenItemsToStorage() {
                localStorage.setItem('hiddenItems', JSON.stringify(Array.from(hiddenItems)));
            }

        document.addEventListener('DOMContentLoaded', function() {
            updateMenuItemsList();
            fetchFeeds();
            setupAutoRefresh();
            window.addEventListener('click', closeMenuOnOutsideClick);
        });
    </script></body></html>
